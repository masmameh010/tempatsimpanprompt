<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PENYIMPAN KOLEKSI GAMBAR AI | by IMAJINASILOKAL</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f0f9ff 0%, #e6f7ff 100%);
    }
    .header-gradient {
      background: linear-gradient(90deg, #4f46e5 0%, #7c3aed 100%);
    }
    .platform-card {
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    .platform-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
    }
    .platform-card.active {
      border-color: #4f46e5;
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
    }
    .gallery-item {
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      position: relative;
    }
    .gallery-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    }
    .copy-btn {
      cursor: pointer;
      transition: all 0.2s;
    }
    .copy-btn:hover {
      transform: scale(1.1);
    }
    .copy-btn:active {
      transform: scale(0.95);
    }
    .badge {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 500;
    }
    .lora-item {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .lora-item input[type="text"] {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 0.5rem;
      font-size: 0.875rem;
    }
    .lora-item input[type="number"] {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 0.5rem;
      font-size: 0.875rem;
    }
    .lora-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 12px;
    }
    .detail-modal {
      animation: modalFadeIn 0.3s ease-out;
    }
    @keyframes modalFadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .copy-section {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 4px;
      font-size: 0.875rem;
      color: #4b5563;
    }
    .copy-section span {
      flex: 1;
      background: #f3f4f6;
      padding: 6px 10px;
      border-radius: 0.375rem;
      word-break: break-all;
    }
    .reset-btn {
      background: #ef4444;
      color: white;
      padding: 0.75rem 1rem;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s;
    }
    .reset-btn:hover {
      background: #dc2626;
    }
    .delete-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: rgba(239, 68, 68, 0.9);
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      cursor: pointer;
      z-index: 10;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .delete-btn:hover {
      background: #dc2626;
    }
  </style>
</head>
<body class="min-h-screen">
  <div class="max-w-6xl mx-auto px-4 py-6">
    <!-- Header -->
    <header class="mb-8 text-center">
      <div class="header-gradient text-white py-6 px-4 rounded-2xl shadow-lg mb-4">
        <h1 class="text-3xl md:text-4xl font-bold mb-2">
          <i class="fa-solid fa-cloud-arrow-up mr-2"></i>
          PENYIMPAN KOLEKSI GAMBAR AI
        </h1>
        <p class="text-indigo-100 text-lg">by IMAJINASILOKAL</p>
      </div>
      <p class="text-gray-600 max-w-2xl mx-auto">
        Simpan dan kelola koleksi gambar AI beserta prompt dan parameternya dengan mudah. 
        Khusus untuk pengguna Tensor, Midjourney, Gemini, dan platform AI lainnya.
      </p>
    </header>
    <!-- Form Input -->
    <div class="bg-white rounded-2xl shadow-xl mb-8 overflow-hidden">
      <div class="header-gradient p-5 text-white">
        <h2 class="text-xl font-bold flex items-center gap-2">
          <i class="fa-solid fa-plus-circle"></i>
          Tambah Koleksi Baru
        </h2>
      </div>
      <form id="imageForm" class="p-5">
        <!-- Gambar Upload -->
        <div class="mb-6">
          <label class="block mb-3 font-medium text-gray-700 text-lg">
            <i class="fa-solid fa-image mr-2"></i>
            Unggah Gambar AI
          </label>
          <div class="flex items-center justify-center w-full">
            <label for="imageInput" class="flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-xl cursor-pointer bg-gray-50 hover:bg-gray-100 border-gray-300 hover:border-indigo-400">
              <div class="flex flex-col items-center justify-center pt-5 pb-6">
                <i class="fa-solid fa-cloud-arrow-up text-4xl text-gray-400 mb-3"></i>
                <p class="mb-2 text-sm text-gray-500">
                  <span class="font-semibold">Klik untuk upload</span> atau drag & drop
                </p>
                <p class="text-xs text-gray-500">PNG, JPG (Max. 2MB)</p>
              </div>
              <input id="imageInput" type="file" accept="image/*" class="hidden" required>
            </label>
          </div>
          <div id="imagePreview" class="mt-3 hidden">
            <img id="previewImg" class="max-h-64 rounded-lg shadow border mx-auto" alt="Preview Gambar">
          </div>
        </div>
        <!-- Prompt Input -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label for="prompt" class="block mb-2 font-medium text-gray-700">
              <i class="fa-solid fa-keyboard mr-2"></i>
              Prompt
            </label>
            <textarea id="prompt" rows="4" class="block w-full p-4 border rounded-xl focus:ring-2 focus:ring-indigo-300 focus:border-indigo-500" placeholder="Masukkan prompt untuk menghasilkan gambar ini..." required></textarea>
          </div>
          <div>
            <label for="negativePrompt" class="block mb-2 font-medium text-gray-700">
              <i class="fa-solid fa-ban mr-2"></i>
              Negative Prompt
            </label>
            <textarea id="negativePrompt" rows="3" class="block w-full p-4 border rounded-xl focus:ring-2 focus:ring-indigo-300 focus:border-indigo-500" placeholder="Elemen yang tidak diinginkan dalam gambar..."></textarea>
          </div>
        </div>
        <!-- Platform Selection -->
        <div class="mb-6">
          <label class="block mb-3 font-medium text-gray-700 text-lg">
            <i class="fa-solid fa-cube mr-2"></i>
            Pilih Platform
          </label>
          <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
            <div>
              <input type="radio" name="platform" id="tensor" value="tensor" class="hidden peer" checked>
              <label for="tensor" class="platform-card flex flex-col items-center justify-center p-4 bg-white border border-gray-300 rounded-xl cursor-pointer peer-checked:border-indigo-500 peer-checked:ring-2 peer-checked:ring-indigo-200 hover:bg-gray-50">
                <i class="fa-solid fa-robot text-3xl mb-3 text-indigo-600"></i>
                <span class="font-medium">Tensor</span>
              </label>
            </div>
            <div>
              <input type="radio" name="platform" id="midjourney" value="midjourney" class="hidden peer">
              <label for="midjourney" class="platform-card flex flex-col items-center justify-center p-4 bg-white border border-gray-300 rounded-xl cursor-pointer peer-checked:border-indigo-500 peer-checked:ring-2 peer-checked:ring-indigo-200 hover:bg-gray-50">
                <i class="fa-brands fa-artstation text-3xl mb-3 text-purple-600"></i>
                <span class="font-medium">Midjourney</span>
              </label>
            </div>
            <div>
              <input type="radio" name="platform" id="gemini" value="gemini" class="hidden peer">
              <label for="gemini" class="platform-card flex flex-col items-center justify-center p-4 bg-white border border-gray-300 rounded-xl cursor-pointer peer-checked:border-indigo-500 peer-checked:ring-2 peer-checked:ring-indigo-200 hover:bg-gray-50">
                <i class="fa-solid fa-gem text-3xl mb-3 text-blue-600"></i>
                <span class="font-medium">Gemini</span>
              </label>
            </div>
            <div>
              <input type="radio" name="platform" id="piclumen" value="piclumen" class="hidden peer">
              <label for="piclumen" class="platform-card flex flex-col items-center justify-center p-4 bg-white border border-gray-300 rounded-xl cursor-pointer peer-checked:border-indigo-500 peer-checked:ring-2 peer-checked:ring-indigo-200 hover:bg-gray-50">
                <i class="fa-solid fa-palette text-3xl mb-3 text-green-600"></i>
                <span class="font-medium">Piclumen</span>
              </label>
            </div>
            <div>
              <input type="radio" name="platform" id="leonardo" value="leonardo" class="hidden peer">
              <label for="leonardo" class="platform-card flex flex-col items-center justify-center p-4 bg-white border border-gray-300 rounded-xl cursor-pointer peer-checked:border-indigo-500 peer-checked:ring-2 peer-checked:ring-indigo-200 hover:bg-gray-50">
                <i class="fa-solid fa-paintbrush text-3xl mb-3 text-amber-600"></i>
                <span class="font-medium">Leonardo</span>
              </label>
            </div>
          </div>
        </div>
        <!-- Tensor Fields -->
        <div id="tensorFields">
          <div class="bg-indigo-50 border-l-4 border-indigo-500 rounded-lg p-4 mb-6">
            <h3 class="text-lg font-semibold mb-4 text-indigo-700 flex items-center gap-2">
              <i class="fa-solid fa-sliders"></i>
              Pengaturan Tensor
            </h3>
            <!-- Model Selection -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div>
                <label class="block mb-2 font-medium text-gray-700">Model / Checkpoint</label>
                <select id="model" class="block w-full p-3 border rounded-lg bg-white">
                  <option value="" disabled selected>Pilih Model</option>
                  <optgroup label="Model Populer">
                    <option value="Flux.1-Dev-FP8">Flux.1-Dev-FP8</option>
                    <option value="HUBG_Realistic">HUBG_Realistic</option>
                    <option value="SD_2.1">Stable Diffusion 2.1</option>
                    <option value="SDXL">Stable Diffusion XL</option>
                    <option value="PONY">PONY Diffusion</option>
                  </optgroup>
                  <optgroup label="Model Lainnya">
                    <option value="Illustrious">Illustrious</option>
                    <option value="DreamShaper">DreamShaper</option>
                    <option value="RevAnimated">RevAnimated</option>
                    <option value="RealisticVision">RealisticVision</option>
                    <option value="custom">Lainnya...</option>
                  </optgroup>
                </select>
                <input type="text" id="customModel" class="block w-full p-3 border rounded-lg mt-2 hidden" placeholder="Nama model custom">
              </div>
              <div>
                <label class="block mb-2 font-medium text-gray-700">VAE</label>
                <select id="vae" class="block w-full p-3 border rounded-lg bg-white">
                  <option value="" selected>Default</option>
                  <optgroup label="VAE Populer">
                    <option value="vae-ft-mse-840000-ema-pruned">vae-ft-mse-840000-ema-pruned</option>
                    <option value="orangemix.vae">orangemix.vae</option>
                    <option value="kl-f8-anime2.vae">kl-f8-anime2.vae</option>
                  </optgroup>
                  <optgroup label="VAE Lainnya">
                    <option value="anything-v4.0.vae">anything-v4.0.vae</option>
                    <option value="wd-1-5-vae">wd-1-5-vae</option>
                  </optgroup>
                </select>
              </div>
            </div>
            <!-- LoRA Selection -->
            <div class="mb-6">
              <label class="block mb-3 font-medium text-gray-700">
                <i class="fa-solid fa-layer-group mr-2"></i>
                LoRA (Maksimal 6)
              </label>
              <div class="lora-grid">
                <!-- LoRA 1 -->
                <div class="lora-item">
                  <input type="text" class="lora-name" placeholder="Nama LoRA (cth: DetailEnhancer)" value="">
                  <input type="number" min="0" max="2" step="0.1" value="0.8" class="lora-strength" placeholder="Strength">
                </div>
                <!-- LoRA 2 -->
                <div class="lora-item">
                  <input type="text" class="lora-name" placeholder="Nama LoRA (cth: AnimeStyle)" value="">
                  <input type="number" min="0" max="2" step="0.1" value="0.0" class="lora-strength" placeholder="Strength">
                </div>
                <!-- LoRA 3 -->
                <div class="lora-item">
                  <input type="text" class="lora-name" placeholder="Nama LoRA (cth: RealisticVision)" value="">
                  <input type="number" min="0" max="2" step="0.1" value="0.0" class="lora-strength" placeholder="Strength">
                </div>
                <!-- LoRA 4 -->
                <div class="lora-item">
                  <input type="text" class="lora-name" placeholder="Nama LoRA (cth: PortraitMaster)" value="">
                  <input type="number" min="0" max="2" step="0.1" value="0.0" class="lora-strength" placeholder="Strength">
                </div>
                <!-- LoRA 5 -->
                <div class="lora-item">
                  <input type="text" class="lora-name" placeholder="Nama LoRA (cth: LandscapePro)" value="">
                  <input type="number" min="0" max="2" step="0.1" value="0.0" class="lora-strength" placeholder="Strength">
                </div>
                <!-- LoRA 6 -->
                <div class="lora-item">
                  <input type="text" class="lora-name" placeholder="Nama LoRA" value="">
                  <input type="number" min="0" max="2" step="0.1" value="0.0" class="lora-strength" placeholder="Strength">
                </div>
              </div>
            </div>
            <!-- Additional Settings -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
              <div>
                <label class="block mb-2 font-medium text-gray-700">Sampler</label>
                <select id="sampler" class="block w-full p-3 border rounded-lg bg-white">
                  <option value="euler">euler</option>
                  <option value="euler_ancestral">euler_ancestral</option>
                  <option value="heun">heun</option>
                  <option value="heunpp2">heunpp2</option>
                  <option value="dpm_2">dpm_2</option>
                  <option value="dpm_2_ancestral">dpm_2_ancestral</option>
                  <option value="lms">lms</option>
                  <option value="dpm_fast">dpm_fast</option>
                  <option value="dpm_adaptive">dpm_adaptive</option>
                  <option value="dpmpp_2s_ancestral">dpmpp_2s_ancestral</option>
                  <option value="dpmpp_sde_gpu">dpmpp_sde_gpu</option>
                  <option value="dpmpp_2m" selected>dpmpp_2m</option>
                  <option value="dpmpp_2m_sde_gpu">dpmpp_2m_sde_gpu</option>
                  <option value="dpmpp_3m_sde_gpu">dpmpp_3m_sde_gpu</option>
                  <option value="ddpm">ddpm</option>
                  <option value="lcm">lcm</option>
                  <option value="restart">restart</option>
                  <option value="euler_dy">euler_dy</option>
                  <option value="euler_smea_dy">euler_smea_dy</option>
                  <option value="ddim">ddim</option>
                  <option value="uni_pc">uni_pc</option>
                  <option value="uni_pc_bh2">uni_pc_bh2</option>
                  <option value="sde_multistep">sde_multistep</option>
                </select>
              </div>
              <div>
                <label class="block mb-2 font-medium text-gray-700">Scheduler</label>
                <select id="scheduler" class="block w-full p-3 border rounded-lg bg-white">
                  <option value="normal" selected>normal</option>
                  <option value="karras">karras</option>
                  <option value="sgm_uniform">sgm_uniform</option>
                  <option value="exponential">exponential</option>
                  <option value="simple">simple</option>
                  <option value="ddim_uniform">ddim_uniform</option>
                  <option value="beta">beta</option>
                  <option value="linear quadratic">linear quadratic</option>
                </select>
              </div>
              <div>
                <label class="block mb-2 font-medium text-gray-700">Guidance Scale</label>
                <input type="number" id="cfg" min="0" max="20" step="0.1" value="3.5" class="block w-full p-3 border rounded-lg" placeholder="cth: 3.5">
              </div>
            </div>
            <!-- Steps and Checkboxes -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
              <div>
                <label class="block mb-2 font-medium text-gray-700">Steps</label>
                <input type="number" id="steps" min="1" max="150" value="30" class="block w-full p-3 border rounded-lg" placeholder="cth: 30">
              </div>
              <div>
                <label class="block mb-2 font-medium text-gray-700">Seed</label>
                <input type="number" id="seed" class="block w-full p-3 border rounded-lg" placeholder="Seed value (acak jika kosong)">
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="upscaler" class="w-5 h-5 text-indigo-600 rounded">
                <label for="upscaler" class="ml-2 font-medium text-gray-700">Gunakan Upscaler</label>
              </div>
            </div>
            <div class="flex items-center">
              <input type="checkbox" id="adetailer" class="w-5 h-5 text-indigo-600 rounded" checked>
              <label for="adetailer" class="ml-2 font-medium text-gray-700">Gunakan ADetailer</label>
            </div>
          </div>
        </div>
        <!-- Non-Tensor Fields -->
        <div id="altModelFields" class="hidden">
          <div class="bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4 mb-6">
            <h3 class="text-lg font-semibold mb-4 text-blue-700 flex items-center gap-2">
              <i class="fa-solid fa-gear"></i>
              Pengaturan Model
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div id="midjourneyModels" class="hidden">
                <label class="block mb-2 font-medium text-gray-700">Model Midjourney</label>
                <select id="midjourneyModel" class="block w-full p-3 border rounded-lg bg-white">
                  <option value="V7" selected>V7 (default)</option>
                  <option value="V6">V6</option>
                  <option value="V5.2">V5.2</option>
                  <option value="V5.1">V5.1</option>
                  <option value="V5">V5</option>
                  <option value="V4">V4</option>
                  <option value="V3">V3</option>
                  <option value="V2">V2</option>
                  <option value="V1">V1</option>
                  <option value="Niji V5">Niji V5</option>
                  <option value="Niji V4">Niji V4</option>
                </select>
              </div>
              <div id="piclumenModels" class="hidden">
                <label class="block mb-2 font-medium text-gray-700">Model Piclumen</label>
                <select id="piclumenModel" class="block w-full p-3 border rounded-lg bg-white">
                  <option value="PicLumen Art V1">PicLumen Art V1</option>
                  <option value="PicLumen Realistic V2" selected>PicLumen Realistic V2</option>
                  <option value="PicLumen Anime V2">PicLumen Anime V2</option>
                  <option value="PicLumen Lineart V1">PicLumen Lineart V1</option>
                  <option value="Namiya">Namiya</option>
                  <option value="FLUX.1 Kontext">FLUX.1 Kontext</option>
                  <option value="Primo">Primo</option>
                  <option value="Pony Diffusion V6">Pony Diffusion V6</option>
                  <option value="FLUX.1-schnell">FLUX.1-schnell</option>
                  <option value="FLUX.1-dev">FLUX.1-dev</option>
                </select>
              </div>
              <div id="dreaminaModels" class="hidden">
                <label class="block mb-2 font-medium text-gray-700">Model Dreamina</label>
                <select id="dreaminaModel" class="block w-full p-3 border rounded-lg bg-white">
                  <option value="Gambar 3.1" selected>Gambar 3.1</option>
                  <option value="Gambar 3.0">Gambar 3.0</option>
                  <option value="Gambar 2.1">Gambar 2.1</option>
                  <option value="Gambar 2.0 Pro">Gambar 2.0 Pro</option>
                  <option value="Gambar 1.4">Gambar 1.4</option>
                </select>
              </div>
              <div id="leonardoModels" class="hidden">
                <label class="block mb-2 font-medium text-gray-700">Model Leonardo</label>
                <select id="leonardoModel" class="block w-full p-3 border rounded-lg bg-white">
                  <optgroup label="Preset Model Styles">
                    <option value="Cinematic Kino">Cinematic Kino</option>
                    <option value="Concept Art">Concept Art</option>
                    <option value="Graphic Design">Graphic Design</option>
                    <option value="Illustrative Albedo">Illustrative Albedo</option>
                    <option value="Leonardo Lightning">Leonardo Lightning</option>
                    <option value="Lifelike Vision">Lifelike Vision</option>
                    <option value="Portrait Perfect">Portrait Perfect</option>
                    <option value="Stock Photography">Stock Photography</option>
                  </optgroup>
                  <optgroup label="Featured Models">
                    <option value="Lucid Realism">Lucid Realism</option>
                    <option value="GPT-Image-1">GPT-Image-1</option>
                    <option value="FLUX.1 Kontext">FLUX.1 Kontext</option>
                    <option value="Phoenix 1.0">Phoenix 1.0</option>
                    <option value="Flux Dev">Flux Dev</option>
                    <option value="Flux Schnell">Flux Schnell</option>
                    <option value="Phoenix 0.9">Phoenix 0.9</option>
                    <option value="Anime">Anime</option>
                  </optgroup>
                </select>
              </div>
              <div id="geminiModels" class="hidden">
                <label class="block mb-2 font-medium text-gray-700">Model Gemini</label>
                <select id="geminiModel" class="block w-full p-3 border rounded-lg bg-white">
                  <option value="Gemini 2.5 Flash">Gemini 2.5 Flash</option>
                  <option value="Gemini 2.5 Pro" selected>Gemini 2.5 Pro</option>
                  <option value="Custom Gem">Custom Gem</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        <!-- Metadata -->
        <div class="mt-6">
          <h3 class="text-lg font-semibold mb-4 text-indigo-700 flex items-center gap-2">
            <i class="fa-solid fa-tags"></i>
            Metadata
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="tags" class="block mb-2 font-medium text-gray-700">Tags</label>
              <input type="text" id="tags" class="block w-full p-3 border rounded-lg" placeholder="Pisahkan dengan koma (cth: potret, seni digital, wanita)">
            </div>
            <div>
              <label for="notes" class="block mb-2 font-medium text-gray-700">Catatan</label>
              <textarea id="notes" rows="3" class="block w-full p-3 border rounded-lg" placeholder="Catatan tambahan tentang prompt atau gambar..."></textarea>
            </div>
          </div>
        </div>
        <!-- Action Buttons -->
        <div class="mt-8 flex flex-wrap gap-3">
          <button type="submit" class="px-6 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 flex items-center gap-2 font-medium">
            <i class="fa-solid fa-save"></i>
            Simpan Koleksi
          </button>
          <button type="button" id="exportBtn" class="px-6 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 flex items-center gap-2 font-medium">
            <i class="fa-solid fa-file-export"></i>
            Export JSON
          </button>
          <input type="file" id="importInput" accept="application/json" class="hidden">
          <button type="button" id="importBtn" class="px-6 py-3 bg-yellow-600 text-white rounded-xl hover:bg-yellow-700 flex items-center gap-2 font-medium">
            <i class="fa-solid fa-file-import"></i>
            Import JSON
          </button>
          <button type="button" id="resetBtn" class="px-6 py-3 reset-btn flex items-center gap-2 font-medium">
            <i class="fa-solid fa-rotate-left"></i>
            Reset Form
          </button>
        </div>
      </form>
    </div>
    <!-- Gallery Header -->
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4">
      <h2 class="text-2xl font-bold flex items-center gap-2">
        <i class="fa-solid fa-images text-indigo-600"></i>
        Galeri Koleksi
      </h2>
      <div class="flex gap-3">
        <div class="relative">
          <input type="text" id="searchInput" placeholder="Cari prompt atau tag..." class="pl-10 pr-4 py-2 border rounded-lg w-full md:w-64">
          <i class="fa-solid fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
        </div>
        <select id="platformFilter" class="border rounded-lg px-3 py-2">
          <option value="">Semua Platform</option>
          <option value="tensor">Tensor</option>
          <option value="midjourney">Midjourney</option>
          <option value="gemini">Gemini</option>
          <option value="piclumen">Piclumen</option>
          <option value="leonardo">Leonardo</option>
          <option value="dreamina">Dreamina</option>
        </select>
      </div>
    </div>
    <!-- Gallery -->
    <div id="gallery" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5">
      <!-- Data akan muncul di sini setelah input -->
    </div>
  </div>
  <!-- Detail Modal -->
  <div id="detailModal" class="fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50 hidden">
    <div class="bg-white rounded-2xl shadow-lg max-w-4xl w-full max-h-[90vh] overflow-auto detail-modal">
      <div class="header-gradient text-white p-5 flex justify-between items-center sticky top-0">
        <h3 class="text-xl font-bold">Detail Koleksi</h3>
        <button onclick="document.getElementById('detailModal').classList.add('hidden')" class="text-white hover:text-gray-200">
          <i class="fa-solid fa-xmark text-2xl"></i>
        </button>
      </div>
      <div class="p-6">
        <div class="flex flex-col lg:flex-row gap-8">
          <!-- Image Column -->
          <div class="lg:w-2/5">
            <img id="detailImage" class="rounded-xl shadow-lg border w-full">
            <div class="mt-6 bg-gray-50 rounded-xl p-4">
              <h4 class="font-semibold text-lg mb-3 flex items-center gap-2">
                <i class="fa-solid fa-copy"></i>
                Salin Data
              </h4>
              <div class="space-y-2">
                <button onclick="copyToClipboard('prompt')" class="copy-btn w-full text-left px-3 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg flex items-center gap-2">
                  <i class="fa-solid fa-copy"></i>
                  <span>Prompt</span>
                </button>
                <button onclick="copyToClipboard('negativePrompt')" class="copy-btn w-full text-left px-3 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg flex items-center gap-2">
                  <i class="fa-solid fa-copy"></i>
                  <span>Negative Prompt</span>
                </button>
                <button onclick="copyToClipboard('model')" class="copy-btn w-full text-left px-3 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg flex items-center gap-2">
                  <i class="fa-solid fa-copy"></i>
                  <span>Model</span>
                </button>
                <button onclick="copyToClipboard('lora')" class="copy-btn w-full text-left px-3 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg flex items-center gap-2">
                  <i class="fa-solid fa-copy"></i>
                  <span>LoRA</span>
                </button>
                <button onclick="copyToClipboard('parameters')" class="copy-btn w-full text-left px-3 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg flex items-center gap-2">
                  <i class="fa-solid fa-copy"></i>
                  <span>Semua Parameter</span>
                </button>
                <button onclick="copyAllData()" class="w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium mt-2">
                  <i class="fa-solid fa-copy"></i>
                  Salin Semua Data
                </button>
              </div>
            </div>
          </div>
          <!-- Info Column -->
          <div class="lg:w-3/5">
            <div class="space-y-6">
              <div>
                <h4 class="font-semibold text-lg mb-3 flex items-center gap-2">
                  <i class="fa-solid fa-comment"></i>
                  Prompt
                </h4>
                <p id="detailPrompt" class="text-gray-700 leading-relaxed bg-gray-50 p-4 rounded-lg min-h-20"></p>
              </div>
              <div>
                <h4 class="font-semibold text-lg mb-3 flex items-center gap-2">
                  <i class="fa-solid fa-ban"></i>
                  Negative Prompt
                </h4>
                <p id="detailNegativePrompt" class="text-gray-700 leading-relaxed bg-gray-50 p-4 rounded-lg min-h-16"></p>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <h4 class="font-semibold text-lg mb-3 flex items-center gap-2">
                    <i class="fa-solid fa-cube"></i>
                    Platform
                  </h4>
                  <span id="detailPlatform" class="badge bg-indigo-100 text-indigo-800">Tensor</span>
                </div>
                <div>
                  <h4 class="font-semibold text-lg mb-3 flex items-center gap-2">
                    <i class="fa-solid fa-microchip"></i>
                    Model
                  </h4>
                  <span id="detailModel" class="badge bg-purple-100 text-purple-800">Flux.1-Dev-FP8</span>
                </div>
              </div>
              <div>
                <h4 class="font-semibold text-lg mb-3 flex items-center gap-2">
                  <i class="fa-solid fa-tags"></i>
                  Tags
                </h4>
                <div id="detailTags" class="flex flex-wrap gap-2"></div>
              </div>
              <div>
                <h4 class="font-semibold text-lg mb-3 flex items-center gap-2">
                  <i class="fa-solid fa-info-circle"></i>
                  Parameter
                </h4>
                <div class="bg-gray-50 rounded-lg p-4">
                  <div class="copy-section">
                    <span id="detailSteps">30</span>
                    <button onclick="copyText('detailSteps')" class="copy-btn">
                      <i class="fa-solid fa-copy text-gray-500"></i>
                    </button>
                  </div>
                  <div class="copy-section">
                    <span id="detailCfg">3.5</span>
                    <button onclick="copyText('detailCfg')" class="copy-btn">
                      <i class="fa-solid fa-copy text-gray-500"></i>
                    </button>
                  </div>
                  <div class="copy-section">
                    <span id="detailSampler">dpmpp_2m</span>
                    <button onclick="copyText('detailSampler')" class="copy-btn">
                      <i class="fa-solid fa-copy text-gray-500"></i>
                    </button>
                  </div>
                  <div class="copy-section">
                    <span id="detailScheduler">normal</span>
                    <button onclick="copyText('detailScheduler')" class="copy-btn">
                      <i class="fa-solid fa-copy text-gray-500"></i>
                    </button>
                  </div>
                  <div class="copy-section">
                    <span id="detailSeed">-</span>
                    <button onclick="copyText('detailSeed')" class="copy-btn">
                      <i class="fa-solid fa-copy text-gray-500"></i>
                    </button>
                  </div>
                  <div class="mt-3">
                    <strong>LoRA:</strong>
                    <div id="detailLora" class="flex flex-wrap gap-2 mt-1"></div>
                  </div>
                  <div class="mt-3 flex gap-2">
                    <span id="detailUpscaler" class="badge bg-yellow-100 text-yellow-800 hidden">Upscaler</span>
                    <span id="detailAdetailer" class="badge bg-yellow-100 text-yellow-800">ADetailer</span>
                  </div>
                </div>
              </div>
              <div>
                <h4 class="font-semibold text-lg mb-3 flex items-center gap-2">
                  <i class="fa-solid fa-sticky-note"></i>
                  Catatan
                </h4>
                <p id="detailNotes" class="text-gray-700 bg-gray-50 p-4 rounded-lg min-h-16"></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Simpan semua koleksi
    let collections = [];

    // Handle image preview and convert to Base64
    document.getElementById('imageInput').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const base64String = e.target.result;
          document.getElementById('previewImg').src = base64String;
          document.getElementById('imagePreview').classList.remove('hidden');
          window.currentImageBase64 = base64String;
        };
        reader.readAsDataURL(file);
      }
    });

    // Handle platform selection
    document.querySelectorAll('input[name="platform"]').forEach(radio => {
      radio.addEventListener('change', function() {
        if (this.value === 'tensor') {
          document.getElementById('tensorFields').classList.remove('hidden');
          document.getElementById('altModelFields').classList.add('hidden');
        } else {
          document.getElementById('tensorFields').classList.add('hidden');
          document.getElementById('altModelFields').classList.remove('hidden');
          
          // Hide all model fields
          document.getElementById('midjourneyModels').classList.add('hidden');
          document.getElementById('piclumenModels').classList.add('hidden');
          document.getElementById('dreaminaModels').classList.add('hidden');
          document.getElementById('leonardoModels').classList.add('hidden');
          document.getElementById('geminiModels').classList.add('hidden');
          
          // Show selected
          if (this.value === 'midjourney') {
            document.getElementById('midjourneyModels').classList.remove('hidden');
          } else if (this.value === 'piclumen') {
            document.getElementById('piclumenModels').classList.remove('hidden');
          } else if (this.value === 'gemini') {
            document.getElementById('geminiModels').classList.remove('hidden');
          } else if (this.value === 'leonardo') {
            document.getElementById('leonardoModels').classList.remove('hidden');
          }
        }
      });
    });

    // Handle custom model input
    document.getElementById('model').addEventListener('change', function() {
      document.getElementById('customModel').classList.toggle('hidden', this.value !== 'custom');
    });

    // Handle form submission
    document.getElementById('imageForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const platform = document.querySelector('input[name="platform"]:checked').value;
      const prompt = document.getElementById('prompt').value;
      const negativePrompt = document.getElementById('negativePrompt').value;
      const tags = document.getElementById('tags').value;
      const notes = document.getElementById('notes').value;

      let model = '';
      if (platform === 'tensor') {
        model = document.getElementById('model').value === 'custom' ? 
                document.getElementById('customModel').value : 
                document.getElementById('model').value;
      } else if (platform === 'midjourney') {
        model = document.getElementById('midjourneyModel').value;
      } else if (platform === 'piclumen') {
        model = document.getElementById('piclumenModel').value;
      } else if (platform === 'gemini') {
        model = document.getElementById('geminiModel').value;
      } else if (platform === 'leonardo') {
        model = document.getElementById('leonardoModel').value;
      }

      const tensorData = platform === 'tensor' ? {
        vae: document.getElementById('vae').value,
        sampler: document.getElementById('sampler').value,
        scheduler: document.getElementById('scheduler').value,
        cfg: document.getElementById('cfg').value,
        steps: document.getElementById('steps').value,
        seed: document.getElementById('seed').value || 'acak',
        upscaler: document.getElementById('upscaler').checked,
        adetailer: document.getElementById('adetailer').checked,
        lora: Array.from(document.querySelectorAll('.lora-item')).map(item => {
          const name = item.querySelector('.lora-name').value;
          const strength = item.querySelector('.lora-strength').value;
          return name ? `${name}: ${strength}` : null;
        }).filter(item => item !== null)
      } : {};

      const collectionItem = {
        id: Date.now(),
        image: window.currentImageBase64 || '',
        platform,
        prompt,
        negativePrompt,
        model,
        tags: tags.split(',').map(tag => tag.trim()).filter(tag => tag),
        notes,
        ...tensorData
      };

      collections.push(collectionItem);
      alert('Koleksi berhasil disimpan!');
      
      // Reset form
      document.getElementById('imageForm').reset();
      document.getElementById('imagePreview').classList.add('hidden');
      window.currentImageBase64 = '';
      
      renderGallery();
    });

    // Reset form
    document.getElementById('resetBtn').addEventListener('click', function() {
      if (confirm('Yakin ingin mereset semua data?')) {
        document.getElementById('imageForm').reset();
        document.getElementById('imagePreview').classList.add('hidden');
        window.currentImageBase64 = '';
        document.getElementById('customModel').classList.add('hidden');
        document.getElementById('altModelFields').classList.add('hidden');
        document.getElementById('tensorFields').classList.remove('hidden');
        document.getElementById('model').dispatchEvent(new Event('change'));
      }
    });

    // Delete item
    function deleteItem(id) {
      if (confirm('Yakin ingin menghapus koleksi ini?')) {
        collections = collections.filter(item => item.id !== id);
        renderGallery();
        document.getElementById('detailModal').classList.add('hidden');
      }
    }

    // Export JSON
    document.getElementById('exportBtn').addEventListener('click', function() {
      const dataStr = JSON.stringify(collections, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(dataBlob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'koleksi-gambar-ai.json';
      link.click();
    });

    // Import JSON
    document.getElementById('importBtn').addEventListener('click', () => document.getElementById('importInput').click());
    document.getElementById('importInput').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          try {
            const imported = JSON.parse(e.target.result);
            collections = [...imported];
            alert('Data berhasil diimpor!');
            renderGallery();
          } catch (error) {
            alert('Gagal membaca file JSON.');
          }
        };
        reader.readAsText(file);
      }
    });

    // Render Gallery
    function renderGallery() {
      const gallery = document.getElementById('gallery');
      gallery.innerHTML = '';
      collections.forEach(item => {
        const tagsHTML = item.tags?.map(tag => 
          `<span class="badge bg-indigo-100 text-indigo-800">${tag}</span>`
        ).join('') || '';

        const div = document.createElement('div');
        div.className = 'gallery-item bg-white rounded-xl overflow-hidden border border-gray-200';
        div.innerHTML = `
          <div class="relative">
            <img src="${item.image}" class="w-full h-48 object-cover">
            <div class="absolute top-2 right-2">
              <span class="badge bg-${item.platform === 'tensor' ? 'indigo' : 
                     item.platform === 'midjourney' ? 'purple' : 
                     item.platform === 'gemini' ? 'blue' : 
                     item.platform === 'piclumen' ? 'green' : 'amber'}-100 text-${item.platform === 'tensor' ? 'indigo' : 
                     item.platform === 'midjourney' ? 'purple' : 
                     item.platform === 'gemini' ? 'blue' : 
                     item.platform === 'piclumen' ? 'green' : 'amber'}-800">
                ${item.platform.charAt(0).toUpperCase() + item.platform.slice(1)}
              </span>
            </div>
            <button onclick="deleteItem(${item.id})" class="delete-btn">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
          <div class="p-4">
            <h3 class="font-semibold mb-1">${item.model}</h3>
            <p class="text-sm text-gray-600 mb-3">${item.prompt.substring(0, 50)}...</p>
            <div class="flex flex-wrap gap-1 mb-3">${tagsHTML}</div>
            <button onclick="showDetail(${item.id})" class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium">
              Lihat Detail
            </button>
          </div>
        `;
        gallery.appendChild(div);
      });
    }

    // Show Detail
    function showDetail(id) {
      const item = collections.find(c => c.id === id);
      if (!item) return;

      document.getElementById('detailImage').src = item.image;
      document.getElementById('detailPrompt').textContent = item.prompt;
      document.getElementById('detailNegativePrompt').textContent = item.negativePrompt || '-';
      document.getElementById('detailPlatform').textContent = item.platform;
      document.getElementById('detailModel').textContent = item.model;

      const tagsContainer = document.getElementById('detailTags');
      tagsContainer.innerHTML = '';
      (item.tags || []).forEach(tag => {
        const span = document.createElement('span');
        span.className = 'badge bg-indigo-100 text-indigo-800';
        span.textContent = tag;
        tagsContainer.appendChild(span);
      });

      if (item.platform === 'tensor') {
        document.getElementById('detailSteps').textContent = item.steps;
        document.getElementById('detailCfg').textContent = item.cfg;
        document.getElementById('detailSampler').textContent = item.sampler;
        document.getElementById('detailScheduler').textContent = item.scheduler;
        document.getElementById('detailSeed').textContent = item.seed || '-';
        
        const loraContainer = document.getElementById('detailLora');
        loraContainer.innerHTML = '';
        (item.lora || []).forEach(lora => {
          const span = document.createElement('span');
          span.className = 'badge bg-green-100 text-green-800';
          span.textContent = lora;
          loraContainer.appendChild(span);
        });

        document.getElementById('detailUpscaler').classList.toggle('hidden', !item.upscaler);
        document.getElementById('detailAdetailer').classList.toggle('hidden', !item.adetailer);
      }

      document.getElementById('detailNotes').textContent = item.notes || '-';
      document.getElementById('detailModal').classList.remove('hidden');
    }

    // Copy single text
    function copyText(elementId) {
      const text = document.getElementById(elementId).textContent;
      navigator.clipboard.writeText(text).then(() => {
        alert('Tersalin: ' + text);
      });
    }

    // Copy to clipboard
    function copyToClipboard(field) {
      let text = '';
      if (field === 'prompt') text = document.getElementById('detailPrompt').textContent;
      else if (field === 'negativePrompt') text = document.getElementById('detailNegativePrompt').textContent;
      else if (field === 'model') text = document.getElementById('detailModel').textContent;
      else if (field === 'lora') text = Array.from(document.querySelectorAll('#detailLora .badge')).map(el => el.textContent).join(', ');
      else if (field === 'parameters') {
        text = [
          `Steps: ${document.getElementById('detailSteps').textContent}`,
          `CFG: ${document.getElementById('detailCfg').textContent}`,
          `Sampler: ${document.getElementById('detailSampler').textContent}`,
          `Scheduler: ${document.getElementById('detailScheduler').textContent}`,
          `Seed: ${document.getElementById('detailSeed').textContent}`,
        ].join('\n');
      }
      navigator.clipboard.writeText(text).then(() => {
        alert(`${field} berhasil disalin!`);
      });
    }

    // Copy all data
    function copyAllData() {
      const item = collections.find(c => c.id === parseInt(document.querySelector('#detailModal [onclick^="showDetail"]').getAttribute('onclick').match(/\d+/)));
      if (!item) return;
      let text = `Prompt: ${item.prompt}\n`;
      if (item.negativePrompt) text += `Negative Prompt: ${item.negativePrompt}\n`;
      text += `Platform: ${item.platform}\n`;
      text += `Model: ${item.model}\n`;
      if (item.tags.length) text += `Tags: ${item.tags.join(', ')}\n`;
      if (item.platform === 'tensor') {
        text += `Steps: ${item.steps}\n`;
        text += `CFG: ${item.cfg}\n`;
        text += `Sampler: ${item.sampler}\n`;
        text += `Scheduler: ${item.scheduler}\n`;
        text += `Seed: ${item.seed}\n`;
        if (item.lora.length) text += `LoRA: ${item.lora.join(', ')}\n`;
        if (item.upscaler) text += `Upscaler: Ya\n`;
        if (item.adetailer) text += `ADetailer: Ya\n`;
      }
      if (item.notes) text += `Catatan: ${item.notes}\n`;
      navigator.clipboard.writeText(text).then(() => {
        alert('Semua data berhasil disalin!');
      });
    }

    // Initialize
    document.querySelector('input[name="platform"]:checked').dispatchEvent(new Event('change'));
  </script>
</body>
</html>
